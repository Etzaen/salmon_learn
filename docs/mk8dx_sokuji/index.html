<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="マリオカート8DXの即時集計ツールです。66（交流戦）、タッグ、トリプルス、フォーマンセルの4形式に対応。" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="twitter:card"        content="summary" />
  <meta name="twitter:site"        content="@GungeeSpla" />
  <meta name="twitter:title"       content="マリオカート8DX 即時集計機" />
  <meta name="twitter:description" content="マリオカート8DXの即時集計ツールです。66（交流戦）、タッグ、トリプルス、フォーマンセルの4形式に対応。" />
  <meta name="twitter:image"       content="https://gungeespla.github.io/salmon_learn/mk8dx_sokuji/favicon.png" />
  <title>マリオカート8DX 即時集計機</title>
  <!--<link rel="shortcut icon" href="favicon.ico">-->
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/jquery.mysuggest.css">
  <link rel="stylesheet" href="sokuji_ocr/assets/style.css?Ver.0.1.0">
  <script type="text/javascript" src='assets/jquery.js'></script>
  <script type="text/javascript" src='assets/jquery.mysuggest.js'></script>
  <script type="text/javascript" src='assets/main.js?Ver.0.1.1'></script>
  <script type="text/javascript" src='assets/ocr.js?Ver.0.1.0'></script>
  <!--
  <script type="text/javascript" src='tesseract/tesseract.min.js'></script>
  <script type="text/javascript" src='sokuji_ocr/assets/main.js'></script>
  <script type="text/javascript" src='sokuji_ocr/assets/trim.js'></script>
  -->
</head>
<body>
  <div id="main-content">
    <h5>© 2019 <a href="https://twitter.com/GungeeSpla" target="_blank">@GungeeSpla</a></h5>
    <h1>マリオカート8DX 即時集計機 Ver.0.1.1</h1>
    <div id="tag-area">
      <p class="page-tag">マリオカート</p>
      <p class="page-tag">マリオカート8デラックス</p>
      <p class="page-tag">マリオカート8DX</p>
      <p class="page-tag">MX8DX</p>
      <p class="page-tag">66</p>
      <p class="page-tag">交流戦</p>
      <p class="page-tag">タッグ</p>
      <p class="page-tag">トリプルス</p>
      <p class="page-tag">フォーマンセル</p>
    </div>
    
    <h2>1. レース数、対戦形式、チームタグを入力してください。</h2>
    <div id="input-team-area">
      <div class="margin">
        <h4>レース数</h4>
        <span class="radio-wrapper">
        	<input type="radio" id="race-num-4" class="race-num-radio" name="race-num" value="4"><label for="race-num-4">4レース</label>
        	<input type="radio" id="race-num-8" class="race-num-radio" name="race-num" value="8"><label for="race-num-8">8レース</label>
        	<input type="radio" id="race-num-12" class="race-num-radio" name="race-num" value="12"><label for="race-num-12">12レース</label><br>
        </span>
      </div>
      <div class="margin">
        <h4>対戦形式</h4>
        <span class="radio-wrapper">
        	<input type="radio" id="race-type-2" class="race-type-radio" name="race-type" value="6"><label for="race-type-2">タッグ</label>
        	<input type="radio" id="race-type-3" class="race-type-radio" name="race-type" value="4"><label for="race-type-3">トリプルス</label>
        	<input type="radio" id="race-type-4" class="race-type-radio" name="race-type" value="3"><label for="race-type-4">フォーマンセル</label>
        	<input type="radio" id="race-type-6" class="race-type-radio" name="race-type" value="2"><label for="race-type-6">66（交流戦）</label><br>
        </span>
      </div>
      <div class="margin">
        <h4>チームタグ</h4>
        <table id="table-team-name"></table>
      </div>
      <div class="margin">
        <h4>ショートカットキー</h4>
        <table id="table-sc-key"></table>
      </div>
    </div>
    
    <h2>2. 順位テーブルを埋めてください。</h2>
    <a href="javascript:void(0)" id="input-rank-description-show" show="input-rank-description" text1="説明を見る" text2="説明を隠す">説明を見る</a>
    <div id="input-rank-description" style="display: none;">
      <ul>
        <li>
          <p>1レースのデータは縦1列にまとまっていて、左から順に1レース目、2レース目…と並んでいます。<br>
          それぞれの列において、チームタグを上から下へ、1位から12位に並ぶように埋めてください。</p>
        </li>
        <li>
          <p>チームパレットにあるチームをクリックすると、そのチームが選択された状態になります。<br>
          その状態で好きなマスをクリックすると、そのマスを選択したチームで埋めることができます。</p>
          <p>また、ドラッグ<span class="mini-text">（マウスボタンを押したままカーソルを動かす）</span>によってチームを埋めることもできます。<br>
          チームが入力されているマスを右クリックすると、そのマスのチームを選択した状態にできます。<br>
          マウスホイールの上下回転で選択中のチームを切り替えることもできます。</p>
        </li>
        <li>
          <p>キーボードで入力したい場合は「キー入力」を選択してください。<br>
          ショートカットキーを設定しておけば、ワンタッチでチームを入力できます。</p>
        </li>
        <li>
          <p>コース名は必須ではありませんが、入力すれば集計に表示されます。</p>
        </li>
        <li>
          <p>ロックボタンを押すと、その列を編集不可にすることができます。<br>
          もう一度押すと、編集不可状態を解除できます。</p>
        </li>
        <!--
        <li>
          <p>手順がやや複雑ですが、配信画面のスクショを張り付けて自動でチームを判別することもできます。</p>
          <p>まず下準備として、1レース目だけは手動でチームを入力する必要があります。<br>
          加えて、1レース目のリザルト画面が映っている画面のスクショを撮影して<br>
          <span class="mini-text">（キーボードの「PrtSc」キーを押す。ノートPCによっては「Fn」キーを同時押しする必要があります）</span>、<br>
          1レース目の列下部の「paste」をクリックし、Ctrl+Vもしくは右クリックからペーストします。<br></p>
          <p>以上、チームの入力とスクショの読取りが正常にできていれば「スクショ」の下に「準備OK!」と出ます。<br>
          2レース目以降は、各レースのリザルト（総合ではない）のスクショをペーストしていけばOKです。<br></p>
          <p class="kome-jirushi mini-text">スクショの内容によっては、ゲーム画面の認識がうまくいかないことがあります。<br>
          配信映像の周囲がゴチャついているとうまくいかない可能性が高いです。ご容赦ください。</p>
        </li>
        -->
      </ul>
    </div>
    <div id="input-rank-area">
      <div id="mouse-chaser"></div>
      <div class="margin">
        <h4>チームパレット</h4>
        <div id="input-rank-palette"></div>
      </div>
      <div class="margin">
        <table id="input-rank-table"></table>
      </div>
    </div>
    <button id="reset-button" style="margin-top: 20px;">順位テーブルをリセットする</button>
    
    <h2>3. 即時集計結果が表示されます。</h2>
    <p>結果は自動でコピーされますが、Edge等の一部のブラウザでは機能しないようです。<br>
    その場合は手動でコピーしてみてください。</p>
    <pre id="result"></pre><br><button id="copy-button">コピー</button>
    
    <h2>詳細設定</h2>
    <div id="cfg-area">
      <h3>表示設定</h3>
    	<p><input type="checkbox" id="cfg-latest-score"     class="cfg-check"><label for="cfg-latest-score"    >最新レースの得点（66のみ）</label></p>
    	<p><input type="checkbox" id="cfg-latest-score-dif" class="cfg-check"><label for="cfg-latest-score-dif">最新レースの得点の点差（66のみ）</label></p>
    	<p><input type="checkbox" id="cfg-total-score"      class="cfg-check"><label for="cfg-total-score"     >合計得点</label></p>
    	<p><input type="checkbox" id="cfg-total-score-dif"  class="cfg-check"><label for="cfg-total-score-dif" >合計得点の点差</label></p>
    	<p><input type="checkbox" id="cfg-current-rank"     class="cfg-check"><label for="cfg-current-rank"    >現在順位（66以外）</label></p>
    	<p><input type="checkbox" id="cfg-target-distance"  class="cfg-check"><label for="cfg-target-distance" >目標順位との差（66以外）<span class="mini-text">※現在順位がすでに目標順位以上の場合は、目標のひとつ下の順位との点差</span></label></p>
      <p>
        <span class="radio-title">目標順位</span>
        <span class="radio-wrapper">
        	<span class="cfg-pass-rank" rank="1"><input type="radio" id="cfg-pass-rank-1" class="cfg-radio" name="cfg-pass-rank" value="1"><label for="cfg-pass-rank-1">1位</label></span>
        	<span class="cfg-pass-rank" rank="2"><input type="radio" id="cfg-pass-rank-2" class="cfg-radio" name="cfg-pass-rank" value="2"><label for="cfg-pass-rank-2">2位</label></span>
        	<span class="cfg-pass-rank" rank="3"><input type="radio" id="cfg-pass-rank-3" class="cfg-radio" name="cfg-pass-rank" value="3"><label for="cfg-pass-rank-3">3位</label></span>
        	<span class="cfg-pass-rank" rank="4"><input type="radio" id="cfg-pass-rank-4" class="cfg-radio" name="cfg-pass-rank" value="4"><label for="cfg-pass-rank-4">4位</label></span>
        	<span class="cfg-pass-rank" rank="5"><input type="radio" id="cfg-pass-rank-5" class="cfg-radio" name="cfg-pass-rank" value="5"><label for="cfg-pass-rank-5">5位</label></span>
        </span>
      </p>
    	<p><input type="checkbox" id="cfg-latest-course" class="cfg-check"><label for="cfg-latest-course">コース</label></p>
    	<p><input type="checkbox" id="cfg-left-race-num" class="cfg-check"><label for="cfg-left-race-num">残りレース数</label></p>
      <p>
        <span class="radio-title">自チームの強調文字（66以外）</span>
        <span class="radio-wrapper">
        	<input type="radio" id="cfg-emphasis-1" class="cfg-radio" name="cfg-emphasis" value="【】"><label for="cfg-emphasis-1">【】</label>
        	<input type="radio" id="cfg-emphasis-2" class="cfg-radio" name="cfg-emphasis" value="[]"><label for="cfg-emphasis-2">[]</label>
        	<input type="radio" id="cfg-emphasis-3" class="cfg-radio" name="cfg-emphasis" value="**"><label for="cfg-emphasis-3">**</label>
        	<input type="radio" id="cfg-emphasis-4" class="cfg-radio" name="cfg-emphasis" value=""><label for="cfg-emphasis-4">強調しない</label>
        </span>
      </p>
      <p>
        <span class="radio-title">チームの区切り文字（66以外）</span>
        <span class="radio-wrapper">
        	<input type="radio" id="cfg-team-split-1" class="cfg-radio" name="cfg-team-split" value="／" ><label for="cfg-team-split-1">／</label>
        	<input type="radio" id="cfg-team-split-2" class="cfg-radio" name="cfg-team-split" value=" /"><label for="cfg-team-split-2"> / </label>
        	<input type="radio" id="cfg-team-split-3" class="cfg-radio" name="cfg-team-split" value=" -"><label for="cfg-team-split-3"> - </label>
        </span>
      </p>
      <p>
        <span class="radio-title">項目の区切り文字</span>
        <span class="radio-wrapper">
        	<input type="radio" id="cfg-split-1" class="cfg-radio" name="cfg-split" value="／"><label for="cfg-emphasis-1">／</label>
        	<input type="radio" id="cfg-split-2" class="cfg-radio" name="cfg-split" value=" /"><label for="cfg-emphasis-2"> / </label>
        </span>
      </p>
      <h3>その他の設定</h3>
    	<p><input type="checkbox" id="cfg-auto-complement"  class="cfg-check"><label for="cfg-auto-complement">自動補完を有効にする</span></label></p>
    	<p><input type="checkbox" id="cfg-on-before-unload" class="cfg-check"><label for="cfg-on-before-unload">ページを離れるときに警告する</span></label></p>
    </div>
    
    <h2>アップデート履歴</h2>
    <table id="update-rireki">
      <tr>
        <td><b>0.1.1</b></td>
        <td><ul>
          <li>ショートカットキー設定のセーブ・ロードが正常に動作していなかった問題を修正しました。</li>
        </ul></td>
      </tr>
      <tr>
        <td><b>0.1.0</b></td>
        <td><ul>
          <li>レース数を増やした際に、増やす前のレース数しか集計が行われない問題を修正しました。</li>
          <li>順位テーブルの入力内容が自動でセーブされるようにしました。</li>
          <li>それに伴って「順位テーブルをリセットする」ボタンを順位テーブル下部に追加しました。</li>
          <li>点差のみを表示できるようにしました。</li>
          <li>自チームの強調文字を追加しました。</li>
        </ul></td>
      </tr>
    </table>
        
  </div>
  <img src="sokuji_ocr/assets/rank-image-mono.png" id="rank-image-mono" style="display: none;">
  <img src="sokuji_ocr/assets/sample-name.png" id="test-tesseract-image" style="display: none;">
  <div id="image-viewer-wrapper">
    <div id="image-viewer-inner">
      <img id="image-viewer-image">
      <img id="image-viewer-close" src="sokuji_ocr/assets/close.png">
    </div>
  </div>
  <div id="footer-notice"></div>
</body>
</html>